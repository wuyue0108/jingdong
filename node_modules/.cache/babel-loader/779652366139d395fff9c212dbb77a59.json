{"remainingRequest":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\WY\\Desktop\\jingdong\\src\\effects\\cartEffect.js","dependencies":[{"path":"C:\\Users\\WY\\Desktop\\jingdong\\src\\effects\\cartEffect.js","mtime":1616506387256},{"path":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKLy/otK3nianovabnm7jlhbPpgLvovpEKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICJ2dWUiOwpleHBvcnQgdmFyIHVzZUNvbW1vbkNhcnRFZmZlY3QgPSBmdW5jdGlvbiB1c2VDb21tb25DYXJ0RWZmZWN0KCkgewogIHZhciBzdG9yZSA9IHVzZVN0b3JlKCk7CiAgdmFyIHJvdXRlID0gdXNlUm91dGUoKTsKICB2YXIgc2hvcElkID0gcm91dGUucGFyYW1zLmlkOwogIHZhciBjYXJ0TGlzdCA9IHN0b3JlLnN0YXRlLmNhcnRMaXN0OwoKICB2YXIgY2hhbmdlQ2FydENvdW50SW5mbyA9IGZ1bmN0aW9uIGNoYW5nZUNhcnRDb3VudEluZm8oc2hvcElkLCBwcm9kdWN0SWQsIHByb2R1Y3RJbmZvLCBudW0pIHsKICAgIHN0b3JlLmNvbW1pdCgiY2hhbmdlQ2FydENvdW50SW5mbyIsIHsKICAgICAgc2hvcElkOiBzaG9wSWQsCiAgICAgIHByb2R1Y3RJZDogcHJvZHVjdElkLAogICAgICBwcm9kdWN0SW5mbzogcHJvZHVjdEluZm8sCiAgICAgIG51bTogbnVtCiAgICB9KTsKICB9OwoKICB2YXIgcHJvZHVjdExpc3QgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDsKCiAgICB2YXIgcHJvZHVjdExpc3QgPSAoKF9jYXJ0TGlzdCRzaG9wSWQgPSBjYXJ0TGlzdFtzaG9wSWRdKSA9PT0gbnVsbCB8fCBfY2FydExpc3Qkc2hvcElkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkLlByb2R1Y3RMaXN0KSB8fCB7fTsKICAgIHZhciBub3RFbXB0eVByb2R1Y3RMaXN0ID0ge307IC8vIGNvbnNvbGUubG9nKHByb2R1Y3RMaXN0KTsKCiAgICBmb3IgKHZhciBpIGluIHByb2R1Y3RMaXN0KSB7CiAgICAgIHZhciBwcm9kdWN0ID0gcHJvZHVjdExpc3RbaV07CgogICAgICBpZiAocHJvZHVjdC5jb3VudCA+IDApIHsKICAgICAgICBub3RFbXB0eVByb2R1Y3RMaXN0W2ldID0gcHJvZHVjdDsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBub3RFbXB0eVByb2R1Y3RMaXN0OwogIH0pOwogIHZhciBzaG9wTmFtZSA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHZhciBzaG9wTmFtZSA9IGNhcnRMaXN0W3Nob3BJZF0uc2hvcE5hbWUgfHwgIiI7CiAgICByZXR1cm4gc2hvcE5hbWU7CiAgfSk7CiAgdmFyIGNhbGN1bGF0aW9uID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQyOwoKICAgIHZhciByZXN1bHQgPSB7CiAgICAgIHRvdGFsTnVtYmVyOiAwLAogICAgICB0b3RhbFByaWNlOiAwLAogICAgICBhbGxDaGVja2VkOiB0cnVlCiAgICB9OwogICAgdmFyIHByb2R1Y3RMaXN0ID0gKF9jYXJ0TGlzdCRzaG9wSWQyID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jYXJ0TGlzdCRzaG9wSWQyLlByb2R1Y3RMaXN0OwoKICAgIGlmIChwcm9kdWN0TGlzdCkgewogICAgICBmb3IgKHZhciBpIGluIHByb2R1Y3RMaXN0KSB7CiAgICAgICAgdmFyIHByb2R1Y3QgPSBwcm9kdWN0TGlzdFtpXTsKICAgICAgICByZXN1bHQudG90YWxOdW1iZXIgKz0gcHJvZHVjdC5jb3VudDsKCiAgICAgICAgaWYgKHByb2R1Y3QuY2hlY2tlZCkgewogICAgICAgICAgcmVzdWx0LnRvdGFsUHJpY2UgKz0gcHJvZHVjdC5jb3VudCAqIHByb2R1Y3QucHJpY2U7CiAgICAgICAgfQoKICAgICAgICBpZiAocHJvZHVjdExpc3RbaV0uY291bnQgPiAwICYmICFwcm9kdWN0TGlzdFtpXS5jaGVja2VkKSB7CiAgICAgICAgICByZXN1bHQuYWxsQ2hlY2tlZCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJlc3VsdC50b3RhbFByaWNlID0gcmVzdWx0LnRvdGFsUHJpY2UudG9GaXhlZCgyKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfSk7CiAgcmV0dXJuIHsKICAgIGNhcnRMaXN0OiBjYXJ0TGlzdCwKICAgIGNoYW5nZUNhcnRDb3VudEluZm86IGNoYW5nZUNhcnRDb3VudEluZm8sCiAgICBwcm9kdWN0TGlzdDogcHJvZHVjdExpc3QsCiAgICBzaG9wTmFtZTogc2hvcE5hbWUsCiAgICBjYWxjdWxhdGlvbjogY2FsY3VsYXRpb24KICB9Owp9Ow=="},{"version":3,"sources":["C:/Users/WY/Desktop/jingdong/src/effects/cartEffect.js"],"names":["useStore","useRoute","computed","useCommonCartEffect","store","route","shopId","params","id","cartList","state","changeCartCountInfo","productId","productInfo","num","commit","productList","ProductList","notEmptyProductList","i","product","count","shopName","calculation","result","totalNumber","totalPrice","allChecked","checked","price","toFixed"],"mappings":"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","sourcesContent":["//购物车相关逻辑\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { computed } from \"vue\";\r\nexport const useCommonCartEffect = () => {\r\n  const store = useStore();\r\n  const route = useRoute();\r\n  const shopId = route.params.id;\r\n  const cartList = store.state.cartList;\r\n  const changeCartCountInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit(\"changeCartCountInfo\", {\r\n      shopId,\r\n      productId,\r\n      productInfo,\r\n      num\r\n    });\r\n  };\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.ProductList || {};\r\n    const notEmptyProductList = {};\r\n    // console.log(productList);\r\n    for (let i in productList) {\r\n      const product = productList[i];\r\n      if (product.count > 0) {\r\n        notEmptyProductList[i] = product;\r\n      }\r\n    }\r\n    return notEmptyProductList;\r\n  });\r\n\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId].shopName || \"\";\r\n    return shopName;\r\n  });\r\n  const calculation = computed(() => {\r\n    const result = { totalNumber: 0, totalPrice: 0, allChecked: true };\r\n    const productList = cartList[shopId]?.ProductList;\r\n    if (productList) {\r\n      for (let i in productList) {\r\n        const product = productList[i];\r\n        result.totalNumber += product.count;\r\n        if (product.checked) {\r\n          result.totalPrice += product.count * product.price;\r\n        }\r\n        if (productList[i].count > 0 && !productList[i].checked) {\r\n          result.allChecked = false;\r\n        }\r\n      }\r\n    }\r\n    result.totalPrice = result.totalPrice.toFixed(2);\r\n    return result;\r\n  });\r\n\r\n  return { cartList, changeCartCountInfo, productList, shopName, calculation };\r\n};\r\n"]}]}