{"remainingRequest":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\WY\\Desktop\\jingdong\\src\\views\\orderList\\OrderList.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\WY\\Desktop\\jingdong\\src\\views\\orderList\\OrderList.vue","mtime":1616563585448},{"path":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\WY\\Desktop\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL1dZL0Rlc2t0b3AvamluZ2Rvbmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgeyBnZXQgfSBmcm9tICcuLi8uLi91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IHsgcmVhY3RpdmUsIHRvUmVmcyB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBEb2NrZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Eb2NrZXInOwoKdmFyIHVzZU9yZGVyTGlzdEVmZmVjdCA9IGZ1bmN0aW9uIHVzZU9yZGVyTGlzdEVmZmVjdCgpIHsKICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgIGxpc3Q6IFtdCiAgfSk7CgogIHZhciBnZXRPcmRlckxpc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfcmVzdWx0JGRhdGE7CgogICAgICB2YXIgcmVzdWx0LCBvcmRlckxpc3Q7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZ2V0KCIvYXBpL29yZGVyIik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHQuZXJybm8pID09PSAwICYmIHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQgIT09IHZvaWQgMCAmJiAoX3Jlc3VsdCRkYXRhID0gcmVzdWx0LmRhdGEpICE9PSBudWxsICYmIF9yZXN1bHQkZGF0YSAhPT0gdm9pZCAwICYmIF9yZXN1bHQkZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIG9yZGVyTGlzdCA9IHJlc3VsdC5kYXRhOwogICAgICAgICAgICAgICAgb3JkZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0cyA9IG9yZGVyLnByb2R1Y3RzOwogICAgICAgICAgICAgICAgICB2YXIgdG90YWxQcmljZSA9IDA7CiAgICAgICAgICAgICAgICAgIHZhciB0b3RhbENvdW50ID0gMDsKICAgICAgICAgICAgICAgICAgcHJvZHVjdHMuZm9yRWFjaChmdW5jdGlvbiAocHJvZHVjdEl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50ICs9IHByb2R1Y3RJdGVtLm9yZGVyU2FsZXM7CiAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZSArPSBwcm9kdWN0SXRlbS5vcmRlclNhbGVzICogcHJvZHVjdEl0ZW0ucHJvZHVjdC5wcmljZTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIG9yZGVyLnRvdGFsUHJpY2UgPSB0b3RhbFByaWNlOwogICAgICAgICAgICAgICAgICBvcmRlci50b3RhbENvdW50ID0gdG90YWxDb3VudDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZGF0YS5saXN0ID0gcmVzdWx0LmRhdGE7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gZ2V0T3JkZXJMaXN0KCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIGdldE9yZGVyTGlzdCgpOwoKICB2YXIgX3RvUmVmcyA9IHRvUmVmcyhkYXRhKSwKICAgICAgbGlzdCA9IF90b1JlZnMubGlzdDsKCiAgcmV0dXJuIHsKICAgIGxpc3Q6IGxpc3QKICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdPcmRlckxpc3QnLAogIGNvbXBvbmVudHM6IHsKICAgIERvY2tlcjogRG9ja2VyCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgX3VzZU9yZGVyTGlzdEVmZmVjdCA9IHVzZU9yZGVyTGlzdEVmZmVjdCgpLAogICAgICAgIGxpc3QgPSBfdXNlT3JkZXJMaXN0RWZmZWN0Lmxpc3Q7CgogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbGlzdAogICAgfTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\WY\\Desktop\\jingdong\\src\\views\\orderList\\OrderList.vue"],"names":[],"mappings":";;;AAkCA,SAAS,GAAT,QAAoB,qBAApB;AACA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,OAAO,MAAP,MAAmB,yBAAnB;;AAEA,IAAM,kBAAiB,GAAI,SAArB,kBAAqB,GAAM;AAC/B,MAAM,IAAG,GAAI,QAAQ,CAAC;AAAE,IAAA,IAAI,EAAE;AAAR,GAAD,CAArB;;AACA,MAAM,YAAW;AAAA,uEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACE,GAAG,cADL;;AAAA;AACb,cAAA,MADa;;AAEnB,kBAAI,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,KAAR,MAAkB,CAAlB,IAAuB,MAAvB,aAAuB,MAAvB,+BAAuB,MAAM,CAAE,IAA/B,yCAAuB,aAAc,MAAzC,EAAiD;AACzC,gBAAA,SADyC,GAC7B,MAAM,CAAC,IADsB;AAE/C,gBAAA,SAAS,CAAC,OAAV,CAAkB,UAAA,KAAI,EAAK;AACzB,sBAAM,QAAO,GAAI,KAAK,CAAC,QAAvB;AACA,sBAAI,UAAS,GAAI,CAAjB;AACA,sBAAI,UAAS,GAAI,CAAjB;AACA,kBAAA,QAAQ,CAAC,OAAT,CAAiB,UAAA,WAAU,EAAK;AAC9B,oBAAA,UAAS,IAAK,WAAW,CAAC,UAA1B;AACA,oBAAA,UAAS,IAAK,WAAW,CAAC,UAAZ,GAAyB,WAAW,CAAC,OAAZ,CAAoB,KAA3D;AACD,mBAHD;AAIA,kBAAA,KAAK,CAAC,UAAN,GAAmB,UAAnB;AACA,kBAAA,KAAK,CAAC,UAAN,GAAmB,UAAnB;AACD,iBAVD;AAWA,gBAAA,IAAI,CAAC,IAAL,GAAY,MAAM,CAAC,IAAnB;AACF;;AAhBmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAX,YAAW;AAAA;AAAA;AAAA,KAAjB;;AAkBA,EAAA,YAAY;;AApBmB,gBAqBd,MAAM,CAAC,IAAD,CArBQ;AAAA,MAqBvB,IArBuB,WAqBvB,IArBuB;;AAsB/B,SAAO;AAAE,IAAA,IAAG,EAAH;AAAF,GAAP;AACF,CAvBA;;AA0BA,eAAe;AACb,EAAA,IAAI,EAAE,WADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,MAAK,EAAL;AAAF,GAFC;AAGb,EAAA,KAHa,mBAGJ;AAAA,8BACU,kBAAkB,EAD5B;AAAA,QACC,IADD,uBACC,IADD;;AAEP,WAAO;AAAE,MAAA,IAAG,EAAH;AAAF,KAAP;AACF;AANa,CAAf","sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"header\">我的订单</div>\r\n    <div class=\"content\">\r\n      <div class=\"content__item\"\r\n           v-for=\"(item,index) in list\"\r\n           :key=\"index\">\r\n        <div class=\"content__title\">\r\n          <div class=\"content__title__name\">{{item.shopName}}</div>\r\n          <div class=\"content__title__state\">\r\n            {{item.isCanceled?'已取消':'已下单'}}\r\n          </div>\r\n        </div>\r\n        <div class=\"content__detail\">\r\n          <div class=\"content__detail__imgs\">\r\n            <template v-for=\" (innerItem,innerIndex) in item.products\"\r\n                      :key=\"innerIndex\">\r\n              <img class=\"content__detail__img\"\r\n                   :src=innerItem.product.img>\r\n            </template>\r\n          </div>\r\n          <div class=\"content__detail__info\">\r\n            <div class=\"content__detail__info__price\">¥{{item.totalPrice}}</div>\r\n            <div class=\"content__detail__info__count\">共{{item.totalCount}}件</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Docker :currentIndex=2 />\r\n</template>\r\n\r\n\r\n<script>\r\nimport { get } from '../../utils/request'\r\nimport { reactive, toRefs } from 'vue'\r\nimport Docker from '../../components/Docker'\r\n\r\nconst useOrderListEffect = () => {\r\n  const data = reactive({ list: [] })\r\n  const getOrderList = async () => {\r\n    const result = await get(`/api/order`)\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      const orderList = result.data;\r\n      orderList.forEach(order => {\r\n        const products = order.products\r\n        let totalPrice = 0\r\n        let totalCount = 0\r\n        products.forEach(productItem => {\r\n          totalCount += productItem.orderSales;\r\n          totalPrice += productItem.orderSales * productItem.product.price\r\n        })\r\n        order.totalPrice = totalPrice\r\n        order.totalCount = totalCount\r\n      })\r\n      data.list = result.data\r\n    }\r\n  }\r\n  getOrderList()\r\n  const { list } = toRefs(data)\r\n  return { list }\r\n}\r\n\r\n\r\nexport default {\r\n  name: 'OrderList',\r\n  components: { Docker },\r\n  setup () {\r\n    const { list } = useOrderListEffect();\r\n    return { list }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrapper {\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0.49rem;\r\n  background-color: #f1f1f1;\r\n}\r\n.header {\r\n  width: 100%;\r\n  line-height: 0.64rem;\r\n  text-align: center;\r\n  font-size: 0.16rem;\r\n  color: #333333;\r\n  background-color: #fff;\r\n}\r\n.content {\r\n  width: 100%;\r\n  position: absolute;\r\n  padding-top: 0.16rem;\r\n  &__item {\r\n    margin: 0 auto;\r\n    margin-bottom: 0.16rem;\r\n    padding: 0.16rem;\r\n    width: 3.33rem;\r\n    height: 1.1rem;\r\n    box-sizing: border-box;\r\n    border-radius: 0.04rem;\r\n    background-color: #fff;\r\n  }\r\n  &__title {\r\n    display: flex;\r\n    &__name {\r\n      width: 0.8rem;\r\n      text-align: left;\r\n      font-size: 0.16rem;\r\n      color: #333333;\r\n    }\r\n    &__state {\r\n      flex: 1;\r\n      text-align: right;\r\n      font-size: 0.14rem;\r\n      color: #999999;\r\n    }\r\n  }\r\n  &__detail {\r\n    position: relative;\r\n    &__imgs {\r\n      margin-top: 0.16rem;\r\n    }\r\n    &__img {\r\n      display: inline-block;\r\n      margin-right: 0.12rem;\r\n      width: 0.4rem;\r\n      height: 0.4rem;\r\n    }\r\n    &__info {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      text-align: right;\r\n      &__price {\r\n        margin-bottom: 0.04rem;\r\n        font-size: 0.14rem;\r\n        color: #e93b3b;\r\n      }\r\n      &__count {\r\n        font-size: 0.12rem;\r\n        color: #333333;\r\n        line-height: 0.14rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"sourceRoot":""}]}